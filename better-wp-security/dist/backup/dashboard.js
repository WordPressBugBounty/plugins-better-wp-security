/*! For license information please see dashboard.js.LICENSE.txt */
(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[9772],{3075:e=>{e.exports=function(){return this.wp.i18n}()},8601:e=>{e.exports=function(){return this.wp.element}()},10424:e=>{e.exports=function(){return this.itsec.dashboard.dashboard}()},31987:e=>{e.exports=function(){return this.wp.data}()},38125:e=>{e.exports=function(){return this.wp.plugins}()},39959:e=>{e.exports=function(){return this.wp.components}()},46627:e=>{e.exports=function(){return this.itsec.packages.data}()},51609:e=>{"use strict";e.exports=window.React},53948:(e,t,n)=>{"use strict";var r=n(51609),s=n(3075),i=n(38125),o=n(31987),c=n(64716),a=n(81923),u=n(66087),l=n(89959),d=n(26843),p=n(10424),h=n(62932);const m=(0,a.A)(d.ui,{target:"e1jcup595"})({name:"1byzgs2",styles:"display:flex;flex-direction:column;justify-content:space-between;height:100%;overflow:hidden"}),f=(0,a.A)(d.EY,{target:"e1jcup594"})({name:"1dvcxr3",styles:"padding:1rem"}),w=(0,a.A)("div",{target:"e1jcup593"})("flex-grow:1;display:flex;align-items:center;justify-content:center;padding:",(({theme:{getSize:e}})=>e(.5)),";"),E=(0,a.A)(d.ui,{target:"e1jcup592"})({name:"1dkakdy",styles:"display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;justify-content:center;align-items:center;border-radius:50%;height:120px;width:120px"}),b=(0,a.A)(d.EY,{target:"e1jcup591"})({name:"15xxqxm",styles:"& sup{position:absolute;font-size:.5em;line-height:1;}"}),g=(0,a.A)("section",{target:"e1jcup590"})({name:"tsr3y4",styles:"flex-shrink:1;overflow-y:auto;position:relative"}),y={render:(0,o.withDispatch)((e=>({addNotice(t,n){e("core/notices").createSuccessNotice(t,{id:n,context:"ithemes-security"}),setTimeout((()=>e("core/notices").removeNotice(n,"ithemes-security")),1e4)}})))((function({card:e,config:t,addNotice:n}){const i=(0,s._n)("Backup","Backups",e.data.total,"better-wp-security");return(0,r.createElement)(m,null,(0,r.createElement)(p.CardHeader,null,(0,r.createElement)(p.CardHeaderTitle,{card:e,config:t})),(0,u.isEmpty)(e.data)?(0,r.createElement)(f,{as:"p",text:(0,s.__)("Enable database logging or file backups to see a history of completed backups","better-wp-security")}):(0,r.createElement)(r.Fragment,null,(0,r.createElement)(w,null,(0,r.createElement)(E,{as:"section",variant:"secondary"},(0,r.createElement)(b,{size:d.$C.GIGANTIC,variant:d.J3.DARK},(0,h.z6)(e.data.total),e.data.total>99&&(0,r.createElement)("sup",null,"+")),(0,r.createElement)(d.EY,{size:d.$C.LARGE,variant:d.J3.DARK,weight:600,text:i}))),e.data.backups.length>0&&(0,r.createElement)(g,{"aria-label":(0,s.__)("Recent Backups","better-wp-security")},(0,r.createElement)("table",{className:"itsec-card-database-backup__recent-backups"},(0,r.createElement)("thead",null,(0,r.createElement)("tr",null,(0,r.createElement)("th",{scope:"column"},(0,s.__)("Date","better-wp-security")),(0,r.createElement)("th",{scope:"column"},(0,s.__)("Size","better-wp-security")),"files"===e.data.source&&(0,r.createElement)("th",{scope:"column"},(0,r.createElement)("span",{className:"screen-reader-text"},(0,s.__)("Download","better-wp-security"))))),(0,r.createElement)("tbody",null,(0,u.take)(e.data.backups,50).map((t=>(0,r.createElement)("tr",{key:t.url||t.time},(0,r.createElement)("th",{scope:"row"},(0,r.createElement)(d.EY,{weight:600,text:(0,l.dateI18n)("M d, Y g:i A",t.time)})),(0,r.createElement)("td",null,(0,r.createElement)(d.EY,{weight:600,text:t.size_format})),"files"===e.data.source&&(0,r.createElement)("td",null,t.url&&(0,r.createElement)("a",{href:t.url,download:!0},(0,s.__)("Download","better-wp-security")))))))))),(0,r.createElement)(p.CardFooterSchemaActions,{card:e,onComplete:(e,t)=>{e.endsWith("/backup")&&n(t.message,"backup-complete")}}))}))};function v(){const{registerCard:e}=(0,o.useDispatch)("ithemes-security/dashboard");return(0,c.ee)(v,(()=>e("database-backup",y))),null}n.p=window.itsecWebpackPublicPath,(0,s.setLocaleData)({"":{}},"ithemes-security-pro"),(0,i.registerPlugin)("itsec-backup-dashboard",{render:()=>(0,r.createElement)(v,null)})},55933:e=>{e.exports=function(){return this.wp.primitives}()},64716:(e,t,n)=>{"use strict";n.d(t,{Yb:()=>f,t1:()=>S,ML:()=>w,$I:()=>b,Mj:()=>g,SV:()=>y,ee:()=>m,sy:()=>c,qY:()=>a,kk:()=>p,wl:()=>d});var r=n(51609),s=n(8601),i=n(89897),o=n(66087);function c(e,t,n={}){return(0,i.createHigherOrderComponent)((i=>class extends s.Component{constructor(){super(...arguments),this.debouncedPropInvoke=(0,o.debounce)(((...t)=>this.props[e](...t)),"function"==typeof t?t(this.props):t,n),this.handler=(e,...t)=>(e&&"function"==typeof e.persist&&e.persist(),this.debouncedPropInvoke(e,...t))}componentWillUnmount(){this.debouncedPropInvoke.cancel()}render(){const t={...this.props,[e]:this.handler};return(0,r.createElement)(i,t)}}),"withDebounceHandler")}function a(e,t){let n;return n=(0,o.isFunction)(t)?[{delay:e,cb:t}]:e,(0,i.createHigherOrderComponent)((e=>class extends s.Component{constructor(){super(...arguments),this.intervalIds=[]}componentDidMount(){for(const e of n)(t=>{this.intervalIds.push(setInterval((()=>t(this.props)),e.delay))})(e.cb)}componentWillUnmount(){this.intervalIds.forEach(clearInterval)}render(){return(0,r.createElement)(e,this.props)}}),"withInterval")}var u=n(58168),l=n(64467);(0,i.createHigherOrderComponent)((e=>class extends s.Component{constructor(...e){super(...e),(0,l.A)(this,"state",{width:1280}),(0,l.A)(this,"mounted",!1),(0,l.A)(this,"containerRef",(0,s.createRef)()),(0,l.A)(this,"resizeObserver",null),(0,l.A)(this,"onWindowResize",(()=>{if(!this.mounted||!this.containerRef.current)return;const e=this.containerRef.current.offsetWidth;this.setState({width:e})}))}componentDidMount(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize);const e=document.getElementById("collapse-button");e?.addEventListener("click",this.onWindowResize),"ResizeObserver"in window&&this.containerRef.current?(this.resizeObserver=new window.ResizeObserver((([e])=>{if(!this.mounted)return;const t=Math.round(e.contentRect.width);this.setState({width:t})})),this.resizeObserver.observe(this.containerRef.current)):this.onWindowResize()}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize);const e=document.getElementById("collapse-button");e?.removeEventListener("click",this.onWindowResize),this.resizeObserver?.disconnect()}render(){const{measureBeforeMount:t=!1,className:n,style:s,...i}=this.props;return t&&!this.mounted?(0,r.createElement)("div",{className:n,style:s,ref:this.containerRef}):(0,r.createElement)("div",{ref:this.containerRef,className:n,style:s},(0,r.createElement)(e,(0,u.A)({},i,{width:this.state.width+20})))}}),"withWidth");const d=(0,i.createHigherOrderComponent)((e=>class extends s.Component{constructor(){super(...arguments),(0,l.A)(this,"state",{pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}}),(0,l.A)(this,"mounted",!1),this.listener=this.listener.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidMount(){this.mounted=!0,window.addEventListener("keydown",this.listener),window.addEventListener("keyup",this.listener),window.addEventListener("click",this.listener),window.addEventListener("blur",this.onBlur)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("keydown",this.listener),window.removeEventListener("keyup",this.listener),window.removeEventListener("click",this.listener),window.removeEventListener("blur",this.onBlur)}listener(e){this.mounted&&this.setState({pressed:{shift:e.shiftKey,ctrl:e.ctrlKey,meta:e.metaKey,alt:e.altKey}})}onBlur(){this.setState({pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}})}render(){return(0,r.createElement)(e,(0,u.A)({pressedModifierKeys:this.state.pressed},this.props))}}),"withPressedModifierKeys"),p=(0,i.createHigherOrderComponent)((e=>function({navigate:t,...n}){return(0,r.createElement)(e,(0,u.A)({},n,{onClick:e=>{try{n.onClick&&n.onClick(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||n.target&&"_self"!==n.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),t())}}))}),"withNavigate"),h=new WeakMap;function m(e,t){(0,s.useLayoutEffect)((()=>{h.has(e)||(t(),h.set(e,!0))}),[])}function f(e,t=!0){const[n,r]=(0,s.useState)("idle"),[i,o]=(0,s.useState)(null),[c,a]=(0,s.useState)(null),u=(0,s.useCallback)(((...t)=>(r("pending"),a(null),e(...t).then((e=>{o(e),r("success")})).catch((e=>{a(e),o(null),r("error")})))),[e]);return(0,s.useEffect)((()=>{t&&u()}),[u,t]),{execute:u,status:n,value:i,error:c}}function w(e,t,n=window){const r=(0,s.useRef)();(0,s.useEffect)((()=>{r.current=t}),[t]),(0,s.useEffect)((()=>{if(!n||!n.addEventListener)return;const t=e=>r.current(e);return n.addEventListener(e,t),()=>n.removeEventListener(e,t)}),[e,n])}const E=["button","submit"];function b(e){const t=(0,s.useRef)(e);(0,s.useEffect)((()=>{t.current=e}),[e]);const n=(0,s.useRef)(!1),r=(0,s.useRef)(),i=(0,s.useCallback)((()=>{clearTimeout(r.current)}),[]);(0,s.useEffect)((()=>()=>i()),[]),(0,s.useEffect)((()=>{e||i()}),[e,i]);const c=(0,s.useCallback)((e=>{const{type:t,target:r}=e;(0,o.includes)(["mouseup","touchend"],t)?n.current=!1:function(e){if(!(e instanceof window.HTMLElement))return!1;switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return(0,o.includes)(E,e.type)}return!1}(r)&&(n.current=!0)}),[]),a=(0,s.useCallback)((e=>{e.persist(),n.current||(r.current=setTimeout((()=>{document.hasFocus()?"function"==typeof t.current&&t.current(e):e.preventDefault()}),0))}),[]);return{onFocus:i,onMouseDown:c,onMouseUp:c,onTouchStart:c,onTouchEnd:c,onBlur:a}}function g(e,t){const[n,r]=(0,s.useState)((()=>{try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return console.error(e),t}}));return[n,t=>{try{const s=t instanceof Function?t(n):t;r(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error(e)}}]}function y(e){const t=(0,s.useRef)(null),n=(0,s.useRef)(!1),r=(0,s.useRef)(e),i=(0,s.useRef)(e);return i.current=e,(0,s.useLayoutEffect)((()=>{e.forEach(((e,s)=>{const i=r.current[s];"function"==typeof e&&e!==i&&!1===n.current&&(i(null),e(t.current))})),r.current=e}),e),(0,s.useLayoutEffect)((()=>{n.current=!1})),(0,s.useCallback)((e=>{t.current=e,n.current=!0,(e?i.current:r.current).forEach((t=>{"function"==typeof t?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)}))}),[])}var v=n(31987),k=n(46627),x=n(3075),L=n(85631),O=n.n(L);function S(e,t){const{proxySetting:n,proxyHeaderSetting:r,schema:i}=(0,v.useSelect)((e=>({proxySetting:e(k.MODULES_STORE_NAME).getEditedSetting("global","proxy"),proxyHeaderSetting:e(k.MODULES_STORE_NAME).getEditedSetting("global","proxy_header"),schema:e(k.MODULES_STORE_NAME).getSettingSchema("global","proxy")})),[]),o=e||n,c=t||r,a=(0,s.useCallback)((()=>{const e={proxy:i.oneOf.map((e=>e.enum[0])).includes(o)?o:i.default};return"manual"===e.proxy&&(e.args={header:c}),O()({method:"POST",path:"ithemes-security/rpc/global/detect-ip",data:e})}),[o,c,i]),{execute:u,status:l,value:d,error:p}=f(a,!!o&&!!i);let h;switch(l){case"idle":break;case"pending":h=(0,x.__)("Detecting IP","better-wp-security");break;case"success":h=(0,x.sprintf)((0,x.__)("Detected IP: %s","better-wp-security"),d.ip);break;case"error":h=(0,x.sprintf)((0,x.__)("Error detecting IP: %s","better-wp-security"),p.message||(0,x.__)("Unknown error."))}return{label:h,detectIp:u,ip:d?.ip,status:l}}},66087:e=>{"use strict";e.exports=window.lodash},77172:e=>{e.exports=function(){return this.wp.url}()},79860:e=>{e.exports=function(){return this.wp.keycodes}()},85631:e=>{e.exports=function(){return this.wp.apiFetch}()},89897:e=>{e.exports=function(){return this.wp.compose}()},89959:e=>{e.exports=function(){return this.wp.date}()},96126:e=>{e.exports=function(){return this.wp.deprecated}()}},e=>{e.O(0,[6843,2038,2932],(()=>e(e.s=53948)));var t=e.O();((window.itsec=window.itsec||{}).backup=window.itsec.backup||{}).dashboard=t}]);